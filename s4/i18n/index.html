
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.3.2">
    
    
      
        <title>Internacionalización de aplicaciones iOS - TPDAM-iOS</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.24c991ad.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.3f5d1f46.min.css">
        
          
          
          <meta name="theme-color" content="#009485">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="teal" data-md-color-accent="teal">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#internacionalizacion-de-aplicaciones-ios" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../.." title="TPDAM-iOS" class="md-header__button md-logo" aria-label="TPDAM-iOS" data-md-component="logo">
      
  <img src="../../logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            TPDAM-iOS
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Internacionalización de aplicaciones iOS
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Limpiar" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="TPDAM-iOS" class="md-nav__button md-logo" aria-label="TPDAM-iOS" data-md-component="logo">
      
  <img src="../../logo.png" alt="logo">

    </a>
    TPDAM-iOS
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../s1/swift_basico/" class="md-nav__link">
        Introducción básica a Swift
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../s1/ejercicios/" class="md-nav__link">
        Ejercicios de Swift básico
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../s2/aplicaciones_ios/" class="md-nav__link">
        Introducción a las aplicaciones iOS
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../s2/recursos/" class="md-nav__link">
        Recursos en aplicaciones iOS
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../s2/ejercicios/" class="md-nav__link">
        Ejercicios sobre aplicaciones iOS
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../s3/intro_swift_2/" class="md-nav__link">
        Más sobre Swift
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Internacionalización de aplicaciones iOS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Internacionalización de aplicaciones iOS
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#anadir-soporte-para-i18n" class="md-nav__link">
    Añadir soporte para i18n
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#localizar-la-interfaz-grafica" class="md-nav__link">
    Localizar la interfaz gráfica
  </a>
  
    <nav class="md-nav" aria-label="Localizar la interfaz gráfica">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#anadir-idiomas" class="md-nav__link">
    Añadir idiomas
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#los-archivos-strings" class="md-nav__link">
    Los archivos .strings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probar-la-interfaz" class="md-nav__link">
    Probar la interfaz
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#anadir-elementos-a-la-interfaz-tras-internacionalizar" class="md-nav__link">
    Añadir elementos a la interfaz tras internacionalizar
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#localizar-los-mensajes-en-el-codigo" class="md-nav__link">
    Localizar los mensajes en el código
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../apendices/control_versiones/" class="md-nav__link">
        Apéndice 1. Control de versiones en Xcode
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#anadir-soporte-para-i18n" class="md-nav__link">
    Añadir soporte para i18n
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#localizar-la-interfaz-grafica" class="md-nav__link">
    Localizar la interfaz gráfica
  </a>
  
    <nav class="md-nav" aria-label="Localizar la interfaz gráfica">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#anadir-idiomas" class="md-nav__link">
    Añadir idiomas
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#los-archivos-strings" class="md-nav__link">
    Los archivos .strings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probar-la-interfaz" class="md-nav__link">
    Probar la interfaz
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#anadir-elementos-a-la-interfaz-tras-internacionalizar" class="md-nav__link">
    Añadir elementos a la interfaz tras internacionalizar
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#localizar-los-mensajes-en-el-codigo" class="md-nav__link">
    Localizar los mensajes en el código
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="internacionalizacion-de-aplicaciones-ios">Internacionalización de aplicaciones iOS<a class="headerlink" href="#internacionalizacion-de-aplicaciones-ios" title="Permanent link">&para;</a></h1>
<p>En un mercado global hay que tener previsto desde el principio la adaptación de los mensajes y textos mostrados por la <em>app</em> al idioma local, y también de otras convenciones (unidades de medida, formatos de números y fechas,...). Al proceso de preparación de la <em>app</em> para soportar distintos idiomas se le denomina <em>internacionalización</em> (o i18n, por el número de letras existentes entre la "i" inicial y la "n" final de la palabra completa). A la adaptación para un idioma concreto se la denomina <em>localización</em>. </p>
<p>Vamos a ver aquí una introducción a las funcionalidades básicas que nos da la plataforma iOS para internacionalizar y localizar nuestras aplicaciones.</p>
<h2 id="anadir-soporte-para-i18n">Añadir soporte para i18n<a class="headerlink" href="#anadir-soporte-para-i18n" title="Permanent link">&para;</a></h2>
<p>En la versión actual de Xcode <strong>los proyectos ya incluyen por defecto soporte para i18n</strong>. Si en un proyecto Xcode seleccionamos el icono del proyecto en el <em>project navigator</em>, al final de las propiedades podemos comprobar que aparece marcada una casilla denominada <code>Use base internationalization</code>. Si el proyecto ha sido desarrollado con una versión antigua de Xcode, la marcaremos.</p>
<p>El idioma de desarrollo o <em>development language</em> es el que se va a usar por defecto para desarrollar la interfaz. Además de este podemos añadir otros idiomas. En la versión actual de Xcode solo está previsto el inglés como <em>development language</em> y no se puede cambiar desde el IDE. Podríamos cambiarlo <a href="https://www.ralfebert.de/snippets/ios/xcode-change-development-language/">editando manualmente el archivo <code>.pbxproj</code></a> del proyecto, aunque aquí vamos a usar el inglés como idioma base.</p>
<h2 id="localizar-la-interfaz-grafica">Localizar la interfaz gráfica<a class="headerlink" href="#localizar-la-interfaz-grafica" title="Permanent link">&para;</a></h2>
<p>Al diseñar la interfaz hay que recordar que debemos usar el <em>development language</em> en los textos de los componentes. Por tanto por defecto pondremos los textos de los botones, <code>Label</code>, etc en <strong>inglés</strong>.</p>
<p>Para que sea más fácil probar las funcionalidades se recomienda terminar primero la interfaz y luego seguir el proceso descrito. Más tarde veremos qué sucede si se añaden nuevos elementos a la interfaz.</p>
<h3 id="anadir-idiomas">Añadir idiomas<a class="headerlink" href="#anadir-idiomas" title="Permanent link">&para;</a></h3>
<p>Supongamos que ya hemos terminado de desarrollar la interfaz en inglés, que es el idioma base por defecto y queremos traducirla. Podemos añadir idiomas a la <em>app</em> en la sección <em>Localizations</em>. Para añadir un idioma basta pulsar <code>+</code></p>
<p><img alt="" src="../images/add_language.gif" /></p>
<p>Fíjate en que cuando añadimos un idioma aparece un cuadro de diálogo que nos dice qué archivos de la interfaz se van a internacionalizar, lo habitual será seleccionarlos todos pero podemos escoger los que nos interesen. Además podemos elegir el método usado. Por defecto es <code>Localizable strings</code>, pero hay otro método llamado  <code>Interface builder storyboard</code>:</p>
<ul>
<li><code>Localizable strings</code>: por cada idioma hay un archivo de texto <code>Strings</code> en el que se almacena la traducción de los textos de cada botón, label, etc. El <em>storyboard</em> es único para todos los idiomas, y lo que se hace es cambiar solamente el texto.</li>
<li><code>Interface builder storyboard</code>: tenemos una copia del <em>storyboard</em> por cada idioma, y la editamos por separado.</li>
</ul>
<p>Aquí vamos a describir cómo usar los <code>Localizable strings</code>, ya que es el método más común.</p>
<h3 id="los-archivos-strings">Los archivos <code>.strings</code><a class="headerlink" href="#los-archivos-strings" title="Permanent link">&para;</a></h3>
<p>Si hemos añadido idiomas adicionales veremos que en el <em>project navigator</em> los iconos de <em>storyboard</em> aparecen con una flecha a la izquierda indicando que en realidad son varios archivos. Al desplegarlo veremos que es el <em>storyboard</em> en sí más un archivo <code>.strings</code> por cada idioma añadido.</p>
<p><img alt="" src="../images/storyboard.gif" /></p>
<p>Al abrir este archivo <code>.strings</code> veremos que es un archivo de texto en el que por cada componente de usuario que contenga texto hay una línea en el formato</p>
<div class="highlight"><pre><span></span><code><span class="s">&quot;identificador-del-componente&quot;</span> <span class="p">=</span> <span class="s">&quot;Texto mostrado&quot;</span> 
</code></pre></div>
<p>Lo único que tenemos que hacer es <em>cambiar el texto al idioma correspondiente</em>. El identificador del componente es un tanto críptico ya que es autogenerado por Xcode,y se corresponde con el <code>Object Id</code> que podemos ver en el <code>Identity inspector</code>, aunque casi siempre es fácil saber de qué componente se trata simplemente por el texto mostrado.</p>
<h3 id="probar-la-interfaz">Probar la interfaz<a class="headerlink" href="#probar-la-interfaz" title="Permanent link">&para;</a></h3>
<p>Podemos previsualizar cómo quedará la interfaz en los distintos idiomas sin necesidad de ejecutar la <em>app</em>. En el <em>assistant editor</em>, clicamos en la barra superior del editor,  seleccionamos <code>Preview</code>, y el <em>storyboard</em> que queremos ver. Se mostrará el <em>storyboard</em> en el idioma base. Este idioma aparecerá en la esquina inferior derecha, pulsando sobre él podemos cambiarlo.</p>
<p><img alt="" src="../images/preview_language.gif" /></p>
<p>También podemos probar la <em>app</em> en el simulador y cambiar aquí el idioma del sistema. Habrá que salir de la <em>app</em>, ir al icono de <em>settings</em> (o <em>configuración</em> en la versión en español) y en el apartado <code>General</code> cambiar el <code>Language &amp; Region</code>. El proceso es un poco más tedioso que la simple previsualización porque hay que salir y volver a entrar en la <em>app</em> y además el simulador tarda unos segundos en aplicar el nuevo idioma.</p>
<h3 id="anadir-elementos-a-la-interfaz-tras-internacionalizar">Añadir elementos a la interfaz tras internacionalizar<a class="headerlink" href="#anadir-elementos-a-la-interfaz-tras-internacionalizar" title="Permanent link">&para;</a></h3>
<p>Hay un problema con el proceso descrito en los apartados anteriores y es que cuando se añaden nuevos elementos a la interfaz de usuario, <strong>Xcode no actualiza automáticamente los archivos <code>.Strings</code></strong>. </p>
<p>Una posible solución sería editar manualmente los <code>.Strings</code> pero es un proceso tedioso porque, como hemos visto, cada componente viene identificado con su <code>Object id</code> y tendríamos que consultarlo manualmente en Xcode y copiarlo al archivo de texto, repitiendo la operación para cada nuevo elemento de la interfaz.</p>
<p>Apple tiene algunas herramientas que permiten automatizar el proceso en cierta medida, pero son herramientas en línea de comandos y su uso no es precisamente trivial. Por ejemplo podríamos usar la herramienta <code>ibtool</code>. Supongamos que hemos añadido una etiqueta al <code>Main.storyboard</code> y queremos actualizar el <code>Main.Strings</code> de español. Tendríamos que abrir una terminal e ir hasta el directorio donde esté este archivo. La estructura de de directorios y archivos relativa a la internacionalización será como la siguiente:</p>
<p><img alt="" src="../images/directorios_i18n.png" /></p>
<p>Como vemos, los archivos de español están en un subdirectorio llamado <code>es.lproj</code>. En el ejemplo solo hay un <code>Main.Strings</code> porque la <em>launchscreen</em> está vacía y por eso no ha generado ningún archivo. Los archivos del idioma base están en <code>base.lproj</code>,  y este es el que contiene los <em>storyboards</em>.</p>
<p>Con la opción <code>--import-strings-file</code> le decimos a <code>ibtool</code> cuál es la versión actual del <code>.Strings</code> de la que queremos partir, y con <code>--generate-strings-file</code> en qué archivo queremos generar el resultado. Finalmente ponemos el nombre del archivo con el <em>storyboard</em>. Por ejemplo, suponiendo que abrimos la terminal y nos movemos al directorio <code>es.lproj</code>, el comando sería algo como:</p>
<div class="highlight"><pre><span></span><code>ibtool --generate-strings-file Main.Strings --import-strings-file Main.Strings ../Base.lproj/Main.storyboard
</code></pre></div>
<p>Ponemos el mismo valor para el <code>--generate-strings-file</code> que para el <code>--import-strings-file</code> para actualizar el archivo, no queremos generar uno nuevo.</p>
<p>Una vez hecho esto, ya podemos editar manualmente el <code>.Strings</code> para añadir las traducciones de los nuevos elementos de la interfaz.</p>
<blockquote>
<p>Hay herramientas de terceros que automatizan bastante más el proceso, algunas comerciales y otras <em>open source</em> como por ejemplo <a href="https://github.com/Flinesoft/BartyCrouch">BartyCrouch</a>. Esta sigue siendo una herramienta de línea de comandos pero con comandos mucho más sencillos, Por ejemplo podemos ejecutar simplemente <code>bartycrouch -p trayectoria/hasta/el/proyecto</code> para actualizar automáticamente <em>todos</em> los archivos <code>Strings</code>. </p>
</blockquote>
<h2 id="localizar-los-mensajes-en-el-codigo">Localizar los mensajes en el código<a class="headerlink" href="#localizar-los-mensajes-en-el-codigo" title="Permanent link">&para;</a></h2>
<p>Hay mensajes que no están fijos en la interfaz, sino que se generan desde el código. Por ejemplo recordemos la <em>app</em> <code>UAdivino</code> que hicimos en el tema de "Introducción a las aplicaciones iOS".</p>
<p>Lo que tenemos que hacer para internacionalizar este tipo de mensajes es usar <em>localized strings</em>. Este tipo de <em>strings</em> no se toman de manera literal sino <em>que se consideran claves en un archivo <code>.Strings</code></em>. El sistema sustituirá la clave por el valor asociado en el idioma actual.</p>
<p>La representación interna de los mensajes en el código sería parecida, aunque puede ser más breve, ya que no es el mensaje que va a ser el usuario final.</p>
<div class="highlight"><pre><span></span><code><span class="kd">import</span> <span class="nc">Foundation</span>

<span class="kd">class</span> <span class="nc">Adivino</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">obtenerRespuesta</span><span class="p">()</span> <span class="p">-&gt;</span> <span class="nb">String</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nv">respuestas</span> <span class="p">=</span> <span class="p">[</span><span class="s">&quot;si&quot;</span><span class="p">,</span> <span class="s">&quot;no&quot;</span><span class="p">,</span> <span class="s">&quot;ni_casualidad&quot;</span><span class="p">,</span> <span class="s">&quot;claro&quot;</span><span class="p">]</span>
        <span class="kd">let</span> <span class="nv">indice</span> <span class="p">=</span> <span class="nb">Int</span><span class="p">(</span><span class="n">arc4random_uniform</span><span class="p">(</span><span class="nb">UInt32</span><span class="p">(</span><span class="n">respuestas</span><span class="p">.</span><span class="bp">count</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">respuestas</span><span class="p">[</span><span class="n">indice</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>En el momento en que queremos asignar el mensaje a un elemento de usuario podemos usar la <em>macro</em> <code>NSLocalizedString</code>, que obtiene el mensaje asociado a la clave</p>
<div class="highlight"><pre><span></span><code><span class="kr">@IBAction</span> <span class="kd">func</span> <span class="nf">botonPulsado</span><span class="p">(</span><span class="kc">_</span> <span class="n">sender</span><span class="p">:</span> <span class="nb">AnyObject</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nv">respuesta</span> <span class="p">=</span> <span class="kc">self</span><span class="p">.</span><span class="n">miAdivino</span><span class="p">.</span><span class="n">obtenerRespuesta</span><span class="p">()</span>
    <span class="kc">self</span><span class="p">.</span><span class="n">labelRespuesta</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="n">NSLocalizedString</span><span class="p">(</span><span class="n">respuesta</span><span class="p">,</span> <span class="n">comment</span><span class="p">:</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>El segundo parámetro de <code>NSLocalizedString</code> es un comentario que pueda ayudar a un traductor de la <em>app</em> a entender el contexto del mensaje. En este caso no tiene sentido y lo dejamos vacío.</p>
<p>Para que esto funcione nos falta todavía crear el archivo <code>.strings</code>. Por defecto se debe llamar <code>Localizable.strings</code>. Para crearlo, en Xcode se elige <code>File &gt; New &gt; File</code>. De entre las plantillas disponibles hay que ir a la sección <code>Resource</code> y elegir allí <code>Strings File</code>.</p>
<p>Teniendo seleccionado el archivo, en el <code>File inspector</code> del panel de la derecha de Xcode pulsamos el botón <code>Localize...</code> para que tenga versiones en distintos idiomas.</p>
<p><img alt="" src="../images/localize_strings.png" /></p>
<p>Nos preguntará qué versión inicial queremos crear (por defecto <code>English</code>). </p>
<p><img alt="" src="../images/english_strings.png" /></p>
<p>Una vez creada esta podemos marcar el resto de idiomas que hemos añadido a nuestra <em>app</em> (en nuestro caso solo español)</p>
<p><img alt="" src="../images/localization_strings.png" /></p>
<p>Esto habrá creado dos archivos distintos para <code>Localizable.strings</code>, uno para inglés y otro para español. Ahora solo tenemos que editar las claves y los valores de cada uno de ellos.</p>
<p>Para la versión inglesa sería algo como:</p>
<div class="highlight"><pre><span></span><code><span class="s">&quot;si&quot;</span> <span class="p">=</span> <span class="s">&quot;Yes!&quot;</span><span class="p">;</span>
<span class="s">&quot;no&quot;</span> <span class="p">=</span> <span class="s">&quot;No!&quot;</span><span class="p">;</span>
<span class="s">&quot;ni_casualidad&quot;</span> <span class="p">=</span> <span class="s">&quot;No way!&quot;</span><span class="p">;</span>
<span class="s">&quot;claro&quot;</span> <span class="p">=</span> <span class="s">&quot;Sure!&quot;</span><span class="p">;</span>
</code></pre></div>
<p>Y para la española:</p>
<div class="highlight"><pre><span></span><code><span class="s">&quot;si&quot;</span> <span class="p">=</span> <span class="s">&quot;¡Si!&quot;</span><span class="p">;</span>
<span class="s">&quot;no&quot;</span> <span class="p">=</span> <span class="s">&quot;¡No!&quot;</span><span class="p">;</span>
<span class="s">&quot;ni_casualidad&quot;</span> <span class="p">=</span> <span class="s">&quot;¡Ni de casualidad!&quot;</span><span class="p">;</span>
<span class="s">&quot;claro&quot;</span> <span class="p">=</span> <span class="s">&quot;¡Claro que sí!&quot;</span><span class="p">;</span>
</code></pre></div>
<p>Para probar esta funcionalidad tendremos que ejecutar la <em>app</em> en el simulador y cambiar el idioma desde la aplicación de <em>settings/configuración</em>.</p>
<p>Es posible que en algunos casos tengamos mensajes con una parte fija y una variable. Por ejemplo un saludo en el que queremos incluir el nombre del usuario. Por desgracia, en la versión actual de iOS la interpolación de cadenas de Swift todavía no funciona para los mensajes internacionalizados. Tenemos que usar <em>placeholders</em> en el mensaje, que son caracteres que funcionan de modo similar a como lo hacen los caracteres de formato en el <code>printf</code> de C:</p>
<div class="highlight"><pre><span></span><code><span class="cm">/* .strings en versión inglés */</span>
<span class="n">saludo</span> <span class="p">=</span> <span class="s">&quot;Welcome %@&quot;</span><span class="p">;</span>
<span class="p">...</span>
</code></pre></div>
<p>En este caso, para "montar" el mensaje final tenemos que usar un inicializador de <code>String</code> que acepte cadenas de formato:</p>
<div class="highlight"><pre><span></span><code>let nombre = &quot;John&quot;
let mensaje = String(format: NSLocalizedString(&quot;saludo&quot;, comment: &quot;&quot;), nombre)
</code></pre></div>
<blockquote>
<p>Nótese que estos <em>placeholders</em> (<code>%@</code>) vienen "heredados" del lenguaje Objective-C, que utiliza <a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html">unos caracteres de formato similares a los de C</a>. Por ejemplo para mostrar un número entero se usa <code>%d</code>, aunque para mostrar una cadena se usa el carácter de formato genérico de "objeto", que como se ha visto es <code>%@</code>.</p>
</blockquote>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Pie">
      
        
        <a href="../../s3/intro_swift_2/" class="md-footer__link md-footer__link--prev" aria-label="Anterior: Más sobre Swift" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Anterior
              </span>
              Más sobre Swift
            </div>
          </div>
        </a>
      
      
        
        <a href="../../apendices/control_versiones/" class="md-footer__link md-footer__link--next" aria-label="Siguiente: Apéndice 1. Control de versiones en Xcode" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Siguiente
              </span>
              Apéndice 1. Control de versiones en Xcode
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
            Material for MkDocs
          </a>
        
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "translations": {"clipboard.copy": "Copiar al portapapeles", "clipboard.copied": "Copiado al portapapeles", "search.config.lang": "es", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "B\u00fasqueda", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.term.missing": "Falta", "select.version.title": "Seleccionar versi\u00f3n"}, "search": "../../assets/javascripts/workers/search.e99e714c.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.bc35569b.min.js"></script>
      
    
  </body>
</html>