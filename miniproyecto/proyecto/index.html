
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.1, mkdocs-material-8.5.6">
    
    
      
        <title>MiniProyecto de iOS (6 puntos en total) - TPDAM-iOS</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.20d9efc8.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
          
          
          <meta name="theme-color" content="#009485">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="teal" data-md-color-accent="teal">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#miniproyecto-de-ios-6-puntos-en-total" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../.." title="TPDAM-iOS" class="md-header__button md-logo" aria-label="TPDAM-iOS" data-md-component="logo">
      
  <img src="../../logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            TPDAM-iOS
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              MiniProyecto de iOS (6 puntos en total)
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="TPDAM-iOS" class="md-nav__button md-logo" aria-label="TPDAM-iOS" data-md-component="logo">
      
  <img src="../../logo.png" alt="logo">

    </a>
    TPDAM-iOS
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../s1/swift_basico/" class="md-nav__link">
        Introducción básica a Swift
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../s1/ejercicios/" class="md-nav__link">
        Ejercicios de Swift básico
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../s2/aplicaciones_ios/" class="md-nav__link">
        Introducción a las aplicaciones iOS
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../s2/recursos/" class="md-nav__link">
        Recursos en aplicaciones iOS
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../s2/ejercicios/" class="md-nav__link">
        Ejercicios sobre aplicaciones iOS
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Material complementario
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Material complementario" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Material complementario
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../apendices/control_versiones/" class="md-nav__link">
        Control de versiones en Xcode
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../s5/testing/" class="md-nav__link">
        Testing en Xcode
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="miniproyecto-de-ios-6-puntos-en-total">MiniProyecto de iOS (6 puntos en total)<a class="headerlink" href="#miniproyecto-de-ios-6-puntos-en-total" title="Permanent link">&para;</a></h1>
<h1 id="juego-de-las-siete-y-media">Juego de las siete y media<a class="headerlink" href="#juego-de-las-siete-y-media" title="Permanent link">&para;</a></h1>
<p>Se propone implementar el conocido juego de cartas de "<a href="https://es.wikipedia.org/wiki/Siete_y_media">las 7 y media</a>". </p>
<p>Para simplificar, solo habrá dos jugadores: el usuario contra la máquina que hace de banca. El usuario va pidiendo cartas una a una hasta que se pasa de 7 y medio o decide plantarse. La máquina no va sacando cartas una a una sino que obtiene una puntuación generada al azar.</p>
<p>Para crear el proyecto, como siempre hacemos, elige la plantilla de <code>App</code>. En la segunda pantalla del asistente dale como nombre <code>SieteyMedia</code> y asegúrate que en el interface pone <code>Storyboard</code> (como todas las apps que hemos hecho hasta ahora lo usan ya debería salir por defecto).</p>
<h2 id="estructura-de-clases-del-modelo-2-puntos">Estructura de clases del modelo (2 puntos)<a class="headerlink" href="#estructura-de-clases-del-modelo-2-puntos" title="Permanent link">&para;</a></h2>
<p>Necesitáis implementar primero <strong>el enum <code>Palo</code> y las clases <code>Carta</code> y <code>Mano</code></strong>. Estos <a href="../../s1/ejercicios/">se proponían como ejercicio</a> el primer día de clase, aunque es posible que no os haya dado tiempo a hacerlos, podéis hacerlos ahora. </p>
<p>Además hay que añadir dos clases necesarias para poder jugar: la <code>Baraja</code> y el propio <code>Juego</code></p>
<h2 id="clase-baraja">Clase <code>Baraja</code><a class="headerlink" href="#clase-baraja" title="Permanent link">&para;</a></h2>
<p>Todas las cartas de la baraja. Del 1 al 12 de los cuatro palos, menos 8 y 9</p>
<ul>
<li>Propiedades: <code>cartas</code>, un array de <code>Carta</code></li>
<li>
<p>Métodos:</p>
<ul>
<li>El <code>init()</code> debe rellenar el array de cartas con todas las cartas de la baraja. Podéis ir generando todos los números de todos los palos con un bucle doble de este estilo:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="k">for</span> <span class="n">palo</span> <span class="k">in</span> <span class="p">[</span><span class="n">Palo</span><span class="p">.</span><span class="n">bastos</span><span class="p">,</span> <span class="n">Palo</span><span class="p">.</span><span class="n">espadas</span><span class="p">,</span> <span class="n">Palo</span><span class="p">.</span><span class="n">copas</span><span class="p">,</span> <span class="n">Palo</span><span class="p">.</span><span class="n">oros</span><span class="p">]</span> <span class="p">{</span>
    <span class="k">for</span> <span class="n">valor</span> <span class="k">in</span> <span class="mf">1.</span><span class="p">..</span><span class="mi">12</span> <span class="p">{</span>
        <span class="k">if</span> <span class="n">valor</span> <span class="o">!=</span> <span class="mi">8</span> <span class="o">&amp;&amp;</span> <span class="n">valor</span> <span class="o">!=</span> <span class="mi">9</span> <span class="p">{</span>  <span class="c1">//El 8 y el 9 no se suelen usar</span>
            <span class="c1">//Aquí crearíais la nueva carta y la añadiríais al array &quot;cartas&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<ul>
<li><code>repartirCarta()</code>: devuelve la última carta de la baraja y la elimina de ella. Es lo que hace exactamente el método de la clase Array <a href="https://developer.apple.com/reference/swift/array/1539777-poplast"><code>popLast()</code></a>, devolver el último valor de un array y eliminarlo de él. </li>
<li><code>barajar()</code>: debe cambiar al azar el orden de las cartas en el <code>Array</code>. Esto lo hace directamente el método <code>shuffle()</code> del <code>Array</code>.</li>
</ul>
</li>
</ul>
<h3 id="clase-juego">Clase <code>Juego</code><a class="headerlink" href="#clase-juego" title="Permanent link">&para;</a></h3>
<p>Es la clase que implementa las reglas del juego de las siete y media. Os dejo aquí una implementación que podéis usar para no gastar demasiado tiempo haciendo la vuestra propia desde cero. No obstante no está completa, tenéis que implementar el método <code>acabarPartida()</code>.</p>
<p>Para simplificar el juego, en esta implementación la máquina no saca cartas de verdad, una a una. Se genera una puntuación al azar entre 1 y 7.5 y se informa al usuario de la puntuación que ha sacado. Para que el juego así tenga sentido, primero juega el jugador humano y luego la máquina.</p>
<div class="highlight"><pre><span></span><code><span class="c1">//Esto de momento no se usa, pero luego sí, ya que necesitaremos notificaciones</span>
<span class="kd">import</span> <span class="nc">Foundation</span>


<span class="kd">enum</span> <span class="nc">EstadoJuego</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">turnoJugador</span><span class="p">,</span> <span class="n">ganaJugador</span><span class="p">,</span> <span class="n">pierdeJugador</span><span class="p">,</span> <span class="n">empate</span><span class="p">,</span> <span class="n">noIniciado</span>
<span class="p">}</span>

<span class="c1">//Versión simplificada de las 7 y media en la que la máquina no saca cartas una a una</span>
<span class="c1">//sino que simula la jugada generando un valor al azar entre 1 y 7.5 (no se pasa nunca!)</span>
<span class="kd">class</span> <span class="nc">Juego</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">baraja</span> <span class="p">:</span> <span class="n">Baraja</span><span class="p">!</span>
    <span class="kd">var</span> <span class="nv">manoJugador</span> <span class="p">:</span> <span class="n">Mano</span><span class="p">!</span>
    <span class="kd">var</span> <span class="nv">estado</span> <span class="p">:</span> <span class="n">EstadoJuego</span>
    <span class="kd">var</span> <span class="nv">jugadaMaquina</span> <span class="p">:</span> <span class="nb">Double</span> <span class="p">=</span> <span class="mf">0.0</span>

    <span class="kd">init</span><span class="p">()</span> <span class="p">{</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">estado</span> <span class="p">=</span> <span class="n">EstadoJuego</span><span class="p">.</span><span class="n">noIniciado</span>
    <span class="p">}</span>

    <span class="c1">//LLamar a este método cuando se pulse el botón de &quot;comenzar partida&quot;</span>
    <span class="kd">func</span> <span class="nf">comenzarPartida</span><span class="p">()</span> <span class="p">{</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">baraja</span> <span class="p">=</span> <span class="n">Baraja</span><span class="p">()</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">baraja</span><span class="p">.</span><span class="n">barajar</span><span class="p">()</span>

        <span class="kc">self</span><span class="p">.</span><span class="n">manoJugador</span> <span class="p">=</span> <span class="n">Mano</span><span class="p">()</span>
        <span class="c1">//generamos un valor al azar entre 1 y 7.5. La máquina nunca se pasa</span>
        <span class="c1">//primero generamos un valor entre 1 y 7</span>
        <span class="n">jugadaMaquina</span> <span class="p">=</span> <span class="nb">Double</span><span class="p">(</span><span class="nb">Int</span><span class="p">.</span><span class="n">random</span><span class="p">(</span><span class="k">in</span><span class="p">:</span> <span class="mf">1.</span><span class="p">..</span><span class="mi">7</span><span class="p">))</span>
        <span class="c1">//y luego el 50% de las veces le sumamos 0.5</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">Bool</span><span class="p">.</span><span class="n">random</span><span class="p">())</span> <span class="p">{</span>
            <span class="n">jugadaMaquina</span> <span class="o">+=</span> <span class="mf">0.5</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">//LLamar a este método cuando se pulse el botón de &quot;Pedir carta&quot;</span>
    <span class="kd">func</span> <span class="nf">jugadorPideCarta</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="kd">let</span> <span class="nv">pedida</span> <span class="p">=</span> <span class="kc">self</span><span class="p">.</span><span class="n">baraja</span><span class="p">.</span><span class="n">repartirCarta</span><span class="p">()</span> <span class="p">{</span>
            <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Sacas </span><span class="si">\(</span><span class="n">pedida</span><span class="p">.</span><span class="n">descripcion</span><span class="si">())</span><span class="s">&quot;</span><span class="p">)</span>
            <span class="kc">self</span><span class="p">.</span><span class="n">manoJugador</span><span class="p">.</span><span class="n">addCarta</span><span class="p">(</span><span class="n">pedida</span><span class="p">)</span>
            <span class="kd">let</span> <span class="nv">valorMano</span> <span class="p">=</span> <span class="kc">self</span><span class="p">.</span><span class="n">sumarManoJugador</span><span class="p">()</span>
            <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Llevas </span><span class="si">\(</span><span class="n">valorMano</span><span class="si">)</span><span class="s"> puntos&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">valorMano</span><span class="p">&gt;</span><span class="mf">7.5</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">acabarPartida</span><span class="p">()</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">//LLamar a este método cuando se pulse el botón de &quot;Plantarse&quot;</span>
    <span class="kd">func</span> <span class="nf">jugadorSePlanta</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">acabarPartida</span><span class="p">()</span>
    <span class="p">}</span>


    <span class="c1">//Métodos para uso interno de la clase, no es necesario llamarlos desde fuera</span>
    <span class="c1">//Calcula quién gana, cambia el estado del juego y lo muestra en la consola con print</span>
    <span class="kd">private</span> <span class="kd">func</span> <span class="nf">acabarPartida</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">//</span><span class="cs">TODO:</span><span class="c1"> sumar el valor de las cartas del jugador</span>
        <span class="c1">//</span><span class="cs">TODO:</span><span class="c1"> calcular quién gana, en función de esta suma y la jugada de la máquina</span>
        <span class="c1">//</span><span class="cs">TODO:</span><span class="c1"> cambiar el estado del juego al valor apropiado e imprimir un mensaje </span>

        <span class="c1">//</span><span class="cs">TODO:</span><span class="c1"> en la interfaz completa, enviar notificación al ViewController indicando que la partida ha terminado,</span>
        <span class="c1">//</span><span class="cs">TODO:</span><span class="c1"> para que este habilite/deshabilite botones y muestre con un &quot;alert&quot; el resultado</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
<h2 id="interfaz-simplificada-1-punto">Interfaz simplificada (1 punto)<a class="headerlink" href="#interfaz-simplificada-1-punto" title="Permanent link">&para;</a></h2>
<p>El <code>ViewController</code> contendrá una instancia de la clase <code>Juego</code>.</p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span> <span class="nc">ViewController</span> <span class="p">:</span> <span class="bp">UIViewController</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nv">juego</span> <span class="p">=</span> <span class="n">Juego</span><span class="p">()</span>
    <span class="p">...</span>

<span class="p">}</span> 
</code></pre></div>
<p>En esta versión muy simplificada de la interfaz solo aparecen en pantalla tres botones: "pedir carta", "plantarse" y "nueva partida", pero no se ven las cartas gráficamente. Eso sí, el juego debería funcionar correctamente, imprimiendo los mensajes con <code>print</code>. </p>
<p>Tendrás que conectar con <em>action</em> (gráficamente) los botones del juego con funciones del <em>view controller</em> que a su vez llamen a los métodos del objeto <code>juego</code>.</p>
<blockquote>
<p>Aunque al principio solo debería poder pulsarse el botón "nueva partida" y una vez comenzada solo los otros dos, etc... de momento no nos preocuparemos de esto y dejaremos que se pueda pulsar cualquier botón, asumiendo que el usuario nunca pulsará un botón que no debería 🙄</p>
</blockquote>
<h2 id="interfaz-completa-15-puntos">Interfaz completa (1.5 puntos)<a class="headerlink" href="#interfaz-completa-15-puntos" title="Permanent link">&para;</a></h2>
<p>En la interfaz completa deberían aparecer pintadas las cartas en pantalla conforme se van repartiendo. Además los botones se deberían habilitar/deshabilitar adecuadamente (por ejemplo si la partida se ha terminado no se puede pedir carta).</p>
<h3 id="anadir-las-imagenes-de-las-cartas-al-proyecto">Añadir las imágenes de las cartas al proyecto<a class="headerlink" href="#anadir-las-imagenes-de-las-cartas-al-proyecto" title="Permanent link">&para;</a></h3>
<p>Descomprime el .zip de Moodle con las imágenes de las cartas en png, selecciona todos los archivos y "déjalos caer" dentro de la carpeta de recursos (<code>Assets.xcassets</code>). </p>
<p>Por cada imagen en png creará un <em>image set</em> con el nombre del archivo ( al estilo <code>1oros</code>, <code>3copas</code>, ...). Por desgracia solo disponemos de las imágenes de las cartas en baja resolución (@1x).</p>
<h3 id="como-dibujar-las-cartas">Cómo dibujar las cartas<a class="headerlink" href="#como-dibujar-las-cartas" title="Permanent link">&para;</a></h3>
<p>Cada vez que dibujemos en pantalla una carta estamos añadiendo a la pantalla actual un <code>UIImageView</code>. Tenemos que guardar referencias a todas las imágenes añadidas para poder borrarlas cuando acabe la partida. Definiremos esta propiedad en el <em>view controller</em> para guardarlas</p>
<div class="highlight"><pre><span></span><code><span class="c1">//propiedad de ViewController.swift</span>
<span class="kd">var</span> <span class="nv">vistasCartas</span> <span class="p">:</span> <span class="p">[</span><span class="bp">UIImageView</span><span class="p">]</span> <span class="p">=</span> <span class="p">[]</span> 
</code></pre></div>
<p>En lugar de dibujar las cartas directamente en su posición final, podemos hacerlo fuera de la pantalla (es decir, con el origen del <em>frame</em> en coordenadas negativas) y luego hacer una animación hasta su posición definitiva. La siguiente función <code>dibujarCarta(carta: Carta, posicion : Int)</code> dibuja una carta con el efecto descrito. La <code>posicion</code> es el orden de la carta, para que se vayan colocando una al lado de la otra: 1, 2...</p>
<blockquote>
<p>En el código de ejemplo usamos un tamaño de carta fijo de 70x100 puntos, en el apartado siguiente se te propone adaptarlo al tamaño real de la pantalla. Nótese que hablamos de puntos y no de pixeles ya que en código no se usa la resolución física sino una resolución "lógica". Hay dispositivos que tienen distinta resolución física pero usan la misma resolución lógica, lo que simplifica el desarrollo. Podéis ver una tabla con resoluciones físicas y lógicas de distintos dispositivos iOS en <a href="https://www.ios-resolution.com/">https://www.ios-resolution.com/</a> 
IMPORTANTE: para que la segunda línea de este código funcione tu tipo enumerado <code>Palo</code> debe tener un valor "interno" de tipo <code>String</code>. Esto lo puedes conseguir simplemente poniendo <code>enum Palo : String</code> en la definición del tipo.</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="kd">func</span> <span class="nf">dibujarCarta</span><span class="p">(</span><span class="n">carta</span><span class="p">:</span> <span class="n">Carta</span><span class="p">,</span> <span class="n">posicion</span> <span class="p">:</span> <span class="nb">Int</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nv">nombreImagen</span> <span class="p">=</span> <span class="nb">String</span><span class="p">(</span><span class="n">carta</span><span class="p">.</span><span class="n">valor</span><span class="p">)</span><span class="o">+</span><span class="nb">String</span><span class="p">(</span><span class="n">carta</span><span class="p">.</span><span class="n">palo</span><span class="p">.</span><span class="n">rawValue</span><span class="p">)</span>
    <span class="c1">//creamos un objeto imagen</span>
    <span class="kd">let</span> <span class="nv">imagenCarta</span> <span class="p">=</span> <span class="bp">UIImage</span><span class="p">(</span><span class="n">named</span><span class="p">:</span> <span class="n">nombreImagen</span><span class="p">)</span>
    <span class="c1">//para que la imagen sea un componente más del UI,</span>
    <span class="c1">//la encapsulamos en un UIImageView</span>
    <span class="kd">let</span> <span class="nv">cartaView</span> <span class="p">=</span> <span class="bp">UIImageView</span><span class="p">(</span><span class="n">image</span><span class="p">:</span> <span class="n">imagenCarta</span><span class="p">)</span>
    <span class="c1">//Inicialmente la colocamos fuera de la pantalla y más grande</span>
    <span class="c1">//para que parezca más cercana</span>
    <span class="c1">//&quot;frame&quot; son los límites de la vista, definen pos y tamaño</span>
    <span class="n">cartaView</span><span class="p">.</span><span class="n">frame</span> <span class="p">=</span> <span class="n">CGRect</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="o">-</span><span class="mi">200</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="o">-</span><span class="mi">200</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="mi">300</span><span class="p">)</span>
    <span class="c1">//La rotamos, para que al &quot;repartirla&quot; haga un efecto de giro</span>
    <span class="n">cartaView</span><span class="p">.</span><span class="n">transform</span> <span class="p">=</span> <span class="bp">CGAffineTransform</span><span class="p">(</span><span class="n">rotationAngle</span><span class="p">:</span> <span class="n">CGFloat</span><span class="p">(</span><span class="nb">Double</span><span class="p">.</span><span class="n">pi</span><span class="p">));</span>
    <span class="c1">//La añadimos a la vista principal, si no no sería visible</span>
    <span class="kc">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">addSubview</span><span class="p">(</span><span class="n">cartaView</span><span class="p">)</span>
    <span class="c1">//guardamos la vista en el array, para luego poder eliminarla</span>
    <span class="kc">self</span><span class="p">.</span><span class="n">vistasCartas</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">cartaView</span><span class="p">)</span>
    <span class="c1">//Animación de repartir carta</span>
    <span class="bp">UIView</span><span class="p">.</span><span class="n">animate</span><span class="p">(</span><span class="n">withDuration</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">){</span>
        <span class="c1">//&quot;efecto caida&quot;: la llevamos a la posición final</span>
        <span class="n">cartaView</span><span class="p">.</span><span class="n">frame</span> <span class="p">=</span> <span class="n">CGRect</span><span class="p">(</span><span class="n">x</span><span class="p">:</span><span class="mi">50</span><span class="o">+</span><span class="mi">70</span><span class="o">*</span><span class="p">(</span><span class="n">posicion</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">y</span><span class="p">:</span><span class="mi">100</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span><span class="mi">70</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span><span class="mi">100</span><span class="p">);</span>
        <span class="c1">//0 como ángulo &quot;destino&quot;, para que rote mientras &quot;cae&quot;</span>
        <span class="n">cartaView</span><span class="p">.</span><span class="n">transform</span> <span class="p">=</span> <span class="bp">CGAffineTransform</span><span class="p">(</span><span class="n">rotationAngle</span><span class="p">:</span><span class="mi">0</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="eliminar-las-cartas-de-la-pantalla">Eliminar las cartas de la pantalla<a class="headerlink" href="#eliminar-las-cartas-de-la-pantalla" title="Permanent link">&para;</a></h3>
<p>Una vez ha terminado la partida, o justo cuando comienza la siguiente, hay que borrar todas las cartas de la pantalla. Vamos recorriendo el array <code>self.vistasCartas</code> del <em>view controller</em> y vamos eliminando las cartas de la pantalla:</p>
<div class="highlight"><pre><span></span><code><span class="c1">//Quitamos las cartas de la pantalla</span>
<span class="k">for</span> <span class="n">vistaCarta</span> <span class="k">in</span> <span class="kc">self</span><span class="p">.</span><span class="n">vistasCartas</span> <span class="p">{</span>
    <span class="n">vistaCarta</span><span class="p">.</span><span class="n">removeFromSuperview</span><span class="p">()</span>
<span class="p">}</span>
<span class="c1">//ya no tenemos imágenes de cartas en pantalla, ponemos el array a vacío</span>
<span class="kc">self</span><span class="p">.</span><span class="n">vistasCartas</span><span class="p">=[]</span>
</code></pre></div>
<h3 id="adaptar-los-dibujos-a-la-resolucion-de-la-pantalla-05-puntos-adicionales">Adaptar los dibujos a la resolución de la pantalla (0.5 puntos ADICIONALES)<a class="headerlink" href="#adaptar-los-dibujos-a-la-resolucion-de-la-pantalla-05-puntos-adicionales" title="Permanent link">&para;</a></h3>
<p>OPCIONALMENTE, en lugar de dibujar las cartas con un tamaño y unas posiciones "fijas", puedes usar un porcentaje o fracción del ancho y alto total de la pantalla. Puedes obtener el ancho y alto de la pantalla del siguiente modo:</p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span> <span class="nv">limitesPantalla</span> <span class="p">=</span> <span class="bp">UIScreen</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">bounds</span>
<span class="kd">let</span> <span class="nv">anchoPantalla</span> <span class="p">=</span> <span class="n">limitesPantalla</span><span class="p">.</span><span class="n">width</span>
<span class="kd">let</span> <span class="nv">altoPantalla</span> <span class="p">=</span> <span class="n">limitesPantalla</span><span class="p">.</span><span class="n">height</span>
</code></pre></div>
<h3 id="como-manipular-los-botones">Cómo manipular los botones<a class="headerlink" href="#como-manipular-los-botones" title="Permanent link">&para;</a></h3>
<ul>
<li>Podéis habilitar/deshabilitar los botones por código poniendo su propiedad <code>isEnabled</code> a <code>true</code> o <code>false</code> respectivamente.</li>
<li>Para que un botón aparezca inicialmente deshabilitado, en el "attributes inspector" de la parte derecha de Xcode desmarcar la casilla <code>enabled</code> dentro de <code>state</code> (está a mitad de panel).</li>
</ul>
<p>Un problema es cómo enterarnos en el ViewController de que la partida ha acabado para habilitar y deshabilitar los correspondientes botones, y para mostrar el resultado con un cuadro de diálogo. Podemos hacerlo con notificaciones:</p>
<ul>
<li>Añadir código Swift a la función <code>acabarPartida()</code> de la clase <code>Juego</code> para que se envíe una notificación con el nombre y contenido que queráis (como contenido debería tener como mínimo una frase resumiendo el resultado del juego para que podáis mostrarlo).</li>
<li>Añadir código Swift al <code>ViewController</code> para que si se recibe la notificación se ejecute un método de éste que habilite/deshabilite botones y muestre el resultado</li>
</ul>
<h3 id="como-mostrar-mensajes-al-usuario">Cómo mostrar mensajes al usuario<a class="headerlink" href="#como-mostrar-mensajes-al-usuario" title="Permanent link">&para;</a></h3>
<p>Podéis mostrar el resultado del juego ("has ganado", "te has pasado",...) con un <code>UIAlertController</code>, que hará aparecer el típico cuadro de diálogo modal. El siguiente código muestra un cuadro que pone "¡¡Has perdido!!", con el título "Fin del juego", y con un único botón de "OK" que no hace nada especial, más que quitar el cuadro de diálogo. </p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span> <span class="nv">alert</span> <span class="p">=</span> <span class="bp">UIAlertController</span><span class="p">(</span>
    <span class="n">title</span><span class="p">:</span> <span class="s">&quot;Fin del juego&quot;</span><span class="p">,</span>
    <span class="n">message</span><span class="p">:</span> <span class="s">&quot;¡¡Has perdido!!&quot;</span><span class="p">,</span>
    <span class="n">preferredStyle</span><span class="p">:</span> <span class="n">UIAlertControllerStyle</span><span class="p">.</span><span class="n">alert</span><span class="p">)</span>
<span class="kd">let</span> <span class="nv">action</span> <span class="p">=</span> <span class="bp">UIAlertAction</span><span class="p">(</span>
    <span class="n">title</span><span class="p">:</span> <span class="s">&quot;OK&quot;</span><span class="p">,</span>
    <span class="n">style</span><span class="p">:</span> <span class="n">UIAlertActionStyle</span><span class="p">.</span><span class="k">default</span><span class="p">)</span>
<span class="n">alert</span><span class="p">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>
<span class="kc">self</span><span class="p">.</span><span class="n">present</span><span class="p">(</span><span class="n">alert</span><span class="p">,</span> <span class="n">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="n">completion</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
</code></pre></div>
<h2 id="i18n-15-puntos">i18n (1.5 puntos)<a class="headerlink" href="#i18n-15-puntos" title="Permanent link">&para;</a></h2>
<p>Internacionaliza la aplicación para que esté localizada al menos en dos idiomas, los que tú prefieras</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.5bf1dace.min.js", "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.config.lang": "es", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "B\u00fasqueda", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version.title": "Seleccionar versi\u00f3n"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.078830c0.min.js"></script>
      
    
  </body>
</html>